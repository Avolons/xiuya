/** layui-v0.0.5 跨设备模块化前端框架@LGPL www.layui.com By 贤心 */
;layui.define(["jquery","layer"],function(a){var e=layui.jquery,i=layui.layer;a("upload",function(a){a=a||{};var t=e("body"),r=(navigator.userAgent.toLowerCase().match(/msie\s(\d+)/)||[],e(a.file||".layui-upload-file")),u=e('<iframe id="layui-upload-iframe" class="layui-upload-iframe" name="layui-upload-iframe"></iframe>');a.check=a.check||"images",e("#layui-upload-iframe")[0]||t.append(u),r.each(function(){var t=e(this),r=e('<div class="layui-upload-button"><form target="layui-upload-iframe" method="'+(a.method||"post")+'" key="set-mine" enctype="multipart/form-data" action="'+(a.url||"")+'"></form><span class="layui-upload-icon"><i class="layui-icon">&#xe608;</i>'+(t.attr("layui-text")||"上传图片")+"</span></div>");"layui-upload-iframe"===t.parent("form").attr("target")&&(t.parent().next().remove(),t.unwrap().unwrap()),t.wrap(r),t.on("change",function(){var r=e(this),u=r.val(),l=e("#layui-upload-iframe");if("images"===a.check&&!/\w\.(jpg|png|gif|bmp)$/.test(escape(u)))return i.msg("图片格式不对"),r.val("");t.parent().submit(),a.before&&a.before();var n=setInterval(function(){var e=l.contents().find("body").text();e&&(clearInterval(n),"function"==typeof a.success&&a.success(e))},30);r.val("")})})})});